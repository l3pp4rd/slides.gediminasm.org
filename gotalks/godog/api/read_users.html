<div class="code">
<pre><code class="go">func (a *API) readUsers() ([]*user, error) {
  users := make([]*user, 0) // non nil slice
  rows, err := a.db.Query("SELECT firstname, lastname FROM users")
  if err != nil {
    return users, err
  }
  defer rows.Close()

  for rows.Next() {
    user := &amp;user{}
    if err := rows.Scan(&amp;user.Firstname, &amp;user.Lastname); err != nil {
      return users, err
    }
    users = append(users, user)
  }
  return users, rows.Err()
}</code></pre>

</div>
