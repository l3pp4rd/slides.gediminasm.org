<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Being dangerous with git rebase</title>

    <meta name="description" content="A tutorial for ViM beginners">
    <meta name="author" content="Gediminas Morkevicius">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <meta name="robots" content="noindex, nofollow" />

    <link rel="stylesheet" href="../revealjs/css/reveal.min.css">
    <link rel="stylesheet" href="../revealjs/css/theme/default.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="../revealjs/lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="../revealjs/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="../revealjs/lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">

        <section>
          <h1>Being dangerous with git</h1>

          <img src="img/keep-calm-and-git-rebase.png" alt="keep calm and git rebase" height="280px" />

          <h3>By your geek friend:</h3>
          <p>
            <small><a href="http://gediminasm.org">Gediminas Morkevičius</a> / <a href="http://twitter.com/l3pp4rd">@l3pp4rd</a></small>
          </p>
        </section>

        <section>
          <h2>Who is this dude?</h2>
          <ul>
            <li>PHP, C, Go - programming language fanatic</li>
            <li>open-source geek, Arch linux, DWM, ViM user</li>
            <li>Author of <a href="https://github.com/l3pp4rd/DoctrineExtensions">Doctrine2 Extensions</a></li>
            <li>And I share my stuff <a href="https://github.com/l3pp4rd">in github</a></li>
          </ul>

          <img src="img/me.jpeg" alt="Me">
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Why You should consider using git

            - git is decentralized
            - git is small and fast
            - git does not store changes - it stores snapshots
            - git has a staging area
            - git is a new standard?
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Workflow

            Git does not force any workflow, use what works best for your team, even
            if you are working alone, git is a perfect match.
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ### What may be useful to know about git repository

            Here is a fresh repository **repo/.git** guts:

            ![Repository guts](img/guts.png)

          </script>
        </section>


        <section data-markdown>
          <script type="text/template">
            ### So what did I meant by "Being Dangerous with git"?

            - experiment
            - create topic branches
            - merge and rebase

            The most advantagous feature in git - **it does not cost you anything to experiment**.

            But **don't** do it on production branch! Thats it.
          </script>
        </section>

        <section>
          <h3>Example</h3>

          <p>Lets say our team gets a task:</p>

          <p>Write a PHP function which would calcalute when to pay salaries for next 12 months.
          They should be paid on the last day of the month, unless that day is a Saturday or Sunday. In that case,
          salaries are paid before the weekend.</p>

          <p>We all like salaries, don't we? So the team starts doing a job right away.
          They do not want to make a mistake here. Its their salaries on the stake!</p>

        </section>

        <section>
          <p>Ben starts the project</p>

          <pre><code class="fragment roll-in">
              mkdir ~/salaries && cd ~/salaries
              git init
              git remote add origin https://github.com/ben/salaries.git
          </code></pre>

          <p><strong>NOTE:</strong> git may have any number of remotes since it is decentralized. Ben in this
          case uses his own guthub account.</p>

          <p>Since Ben knows, how badly he wants his salary on time, he thinks about backing it up. But hey it is git,
          when team kicks in, it all will be backed up, because every git repository clone is the same as a backup.</p>

        </section>

        <section>
          <p>Ben writes his version of salary day calculator function</p>

          <pre><code class="fragment roll-in">vim montly_salary_day.php</code></pre>

          <pre><code class="fragment roll-in" data-noescpape="" style="font-size: 15px;max-height:600px;">&lt;?php
define('DAY', 3600 * 24);

function monthly_salary_day($fromTimestamp, $forNumMonths = 12) {
    $payDays = array();
    do {
        $ndays = intval(date('t', $fromTimestamp));
        $weekday = intval(date('w', $fromTimestamp));
        $day = intval(date('j', $fromTimestamp));
        $payDay = null;
        for ($next = $day; $next &lt;= $ndays; $next++, $fromTimestamp += DAY) {
            if (!in_array($weekday, array(0, 6))) {
                $payDay = $fromTimestamp;
            }
            $weekday = $weekday === 6 ? 0 : $weekday + 1;
        }
        if (null !== $payDay) {
            $payDays[] = date('Y:m:d', $payDay);
        }
    } while($forNumMonths--);
    return $payDays;
}</code></pre>
        </section>

        <section>
          <p>Stage, commit and push to <strong>master</strong></p>
          <pre><code class="fragment roll-in">git add monthly_salary_day.php</code></pre>
          <pre><code class="fragment roll-in">git commit -m 'create initial salary day calculator'</code></pre>
          <pre><code class="fragment roll-in">git push origin master</code></pre>
        </section>

        <section>
          <p>Tom reviews Ben's code</p>
          <p>He notices that in case if current day is the last weekend day of the month,
          there would be one month skipped. So he clones repository and updates:</p>

          <pre><code class="fragment roll-in">git clone https://github.com/ben/salaries.git ~/salaries</code></pre>
          <pre><code class="fragment roll-in">cd ~/salaries</code></pre>
          <pre><code class="fragment roll-in">git checkout -b feature/improvements</code></pre>
          <pre><code class="fragment roll-in">vim monthly_salary_day.php</code></pre>

        </section>

        <section>
          <p>Tom makes some code improvements</p>

          <pre><code class="fragment roll-in">git clone https://github.com/ben/salaries.git ~/salaries</code></pre>
          <pre><code class="fragment roll-in">cd ~/salaries</code></pre>
          <pre><code class="fragment roll-in">git checkout -b feature/improvements</code></pre>
          <pre><code class="fragment roll-in">vim monthly_salary_day.php</code></pre>

        </section>

        <section>
          <pre><code class="fragment roll-in" data-noescpape="" style="font-size: 15px;max-height:600px;">&lt;?php
define('DAY', 3600 * 24);

function monthly_salary_day($fromTimestamp, $forNumMonths = 12) {
    $payDays = array();
    do {
        // get num days in month, weekday and day of the month
        list($ndays, $weekday, $day) = array_map('intval', explode(':', date('t:N:j', $fromTimestamp)));
        for (; $day &lt;= $ndays; $day++, $fromTimestamp += DAY) {
            if ($weekday &lt; 6) {
                $payDay = $fromTimestamp;
            }
            $weekday = $weekday === 7 ? 1 : $weekday + 1;
        }
        if (null !== $payDay) {
            $payDays[] = date('Y:m:d', $payDay);
            $forNumMonths--; // decrement only if payday is available for curr month
        }
    } while($forNumMonths);
    return $payDays;
}</code></pre>
          <pre><code class="fragment roll-in">cd ~/salaries</code></pre>
          <pre><code class="fragment roll-in">git checkout -b feature/improvements</code></pre>
          <pre><code class="fragment roll-in">vim monthly_salary_day.php</code></pre>

        </section>

        <section data-markdown>
          <script type="text/template">
            ## Thank You

            [Gediminas Morkevičius](http://gediminasm.org) [@l3pp4rd](http://twitter.com/l3pp4rd)


            powered by: [RevealJs](http://lab.hakim.se/reveal-js/)
          </script>
        </section>
      </div>

    </div>

    <script src="../revealjs/lib/js/head.min.js"></script>
    <script src="../revealjs/js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        mouseWheel: false,
        rollingLinks: false,
        history: true,
        center: true,

        theme: 'solarized', // available themes are in /css/theme
        transition: 'linear', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: '../revealjs/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '../revealjs/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: '../revealjs/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: '../revealjs/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          //{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: '../revealjs/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
          // { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
          // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>

  </body>
</html>
